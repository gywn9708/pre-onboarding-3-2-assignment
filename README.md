# ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ - Week 3 ~ 4

ì›í‹°ë“œ í”„ë¦¬ì˜¨ë³´ë”© **í”„ë¡ íŠ¸ì—”ë“œ 8íŒ€**ì˜ `íŒ”íŒ”í•œ í˜•ì œë“¤`ì…ë‹ˆë‹¤.<br>

## ğŸ“… í”„ë¡œì íŠ¸ ê¸°ê°„

ê¸°ê°„ : 2022ë…„ 11ì›” 12ì¼ ~ 2022ë…„ 11ì›” 18ì¼

## íŒ”íŒ”í•œ í˜•ì œë“¤ íŒ€ ì†Œê°œ

### FE

<table>
  <tr>
    <td>
        <a href="https://github.com/CodyMan0">            
	    <img src="https://avatars.githubusercontent.com/u/93697790?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/shimeeuisuk">
            <img src="https://avatars.githubusercontent.com/u/104304569?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/jangth0655"> 
            <img src="https://avatars.githubusercontent.com/u/83333409?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/choi2021">
	    <img src="https://avatars.githubusercontent.com/u/80830981?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/strongsongky">
	    <img src="https://avatars.githubusercontent.com/u/102295416?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/gywn9708">
	    <img src="https://avatars.githubusercontent.com/u/107469939?v=4" width="100px" />
        </a>
    </td>
    <td>
        <a href="https://github.com/YongHyunKwon">
	    <img src="https://avatars.githubusercontent.com/u/13326980?v=4" width="100px" />
        </a>
    </td>
  </tr>
  <tr>
    <td><b>ì´ì£¼ì˜(íŒ€ì¥)</b></td>
    <td><b>ì‹¬ì˜ì„(ë¶€íŒ€ì¥)</b></td>
    <td><b>ì¥íƒœí¬</b></td>
    <td><b>ìµœì˜ì¤€</b></td>
    <td><b>ì†¡ê²½ìš©</b></td>
    <td><b>ê°•íš¨ì£¼</b></td>
    <td><b>ê¶Œìš©í˜„</b></td>
  </tr>
  <tr>
    <td><b>Front-End</b></td>
    <td><b>Front-End</b></td>
    <td><b>Front-End</b></td>
    <td><b>Front-End</b></td>
    <td><b>Front-End</b></td>
    <td><b>Front-End</b></td>
    <td><b>Front-End</b></td>
  </tr>
</table>

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

<div align=left> 
  <img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white"> 
  <img src="https://img.shields.io/badge/css-1572B6?style=for-the-badge&logo=css3&logoColor=white"> 
  <img src="https://img.shields.io/badge/typescript-1572B6?style=for-the-badge&logo=typescript&logoColor=white">

   <img src="https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=Next.js&logoColor=white">

  <img src="https://img.shields.io/badge/Tailwind-06B6D4?style=for-the-badge&logo=TailwindCSS&logoColor=white"> 
  
  <img src="https://img.shields.io/badge/reactquery-FF4154?style=for-the-badge&logo=reactquery&logoColor=white">

  <img src="https://img.shields.io/badge/vs_code-007ACC?style=for-the-badge&logo=visualstudiocode&logoColor=white">
   <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white">
  <img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white">
  <br>

</div>

## ğŸ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•

1. ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```zsh
$ npm install
```

2. ë¦¬ëˆ…ìŠ¤ì™€ ìœˆë„ìš° husky ì¶©ëŒ ë°©ì§€ í›„ ì‚¬ìš©ì„ ìœ„í•´ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```zsh
$ chmod ug+x .husky/*
```

3. í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

```zsh
$ npm run dev / yarn dev
```

## ğŸ‘ ì—ëŸ¬ í•´ê²° ê³¼ì •

### ë¬¸ì œ ì •ì˜ : ìƒˆë¡œ ê³ ì¹¨ ë° ë™ì¼í•œ PATHë¡œ ì´ë™ì‹œ ìºì‰¬ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ëŠ” ì´ìŠˆ ë°œìƒ

ì´ˆê¸° ë°ì´í„° fetching ì´í›„ì— ìƒˆë¡œê³ ì¹¨ì´ë‚˜ ë™ì¼í•œ pathë¡œ ì¬ì ‘ì†í•  ê²½ìš°, ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ ìºì‰¬ ë°ì´í„°ê°€ ì‚¬ë¼ì ¸ í•´ë‹¹ í‚¤ë¥¼ ì´ìš©í•œ CRUD ê¸°ëŠ¥ì´ UIë¡œ ë°˜ì˜ë˜ì§€ ì•ŠëŠ” ì´ìŠˆê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

<img src="https://user-images.githubusercontent.com/93697790/202516281-aee75db4-172e-4450-8833-2298902a8d5a.PNG" width="500px" />

### í•´ê²° ê³¼ì •

cacheë˜ì–´ì•¼ í•  ë°ì´í„°ê°€ ì‚¬ë ¤ì ¸ ìƒê¸´ ì—ëŸ¬ì´ê¸° ë•Œë¬¸ì— ì´ì „ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ëŠ” React Queryì˜ keeppreviousdataë¥¼ trueë¡œ ì„¤ì •í•´ë³´ì•˜ì§€ë§Œ ì—¬ì „íˆ ì—ëŸ¬ê°€ ë‚¨ì•„ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ ìƒê°í•´ë³¸ ë°©ë²•ì€ react queryì˜ ê¸°ëŠ¥ ì¤‘ persistQueryClientë¥¼ ì´ìš©í•´ localstorageì— ë°ì´í„°ë“¤ì„ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ìƒê°í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë§ì€ ë°ì´í„°ë¥¼ ë§¤ë²ˆ localStorageì— ì €ì¥í•˜ëŠ” ë°©ë²•ì€ ë¹„íš¨ìœ¨ì ì´ë¼ëŠ” ìƒê°ì— ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

ë¸”ë¡œê·¸ë‚˜ stackOverflowì—ì„œëŠ” ì €í¬ì™€ ìœ ì‚¬í•œ ì´ìŠˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´, React Query githubì˜ issueí˜ì´ì§€ë¥¼ ê²€ìƒ‰í•´, ì €í¬ì™€ ìœ ì‚¬í•œ ë¬¸ì œ ìƒí™©ì„ ë‹´ì€ ì´ìŠˆë¥¼ ì°¾ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
í•´ë‹¹ ë¬¸ì œëŠ” SSRì—ì„œ ê°™ì€ pathë¡œ ì´ë™ ì‹œì—, react queryê°€ í˜ì´ì§€ ì´ë™ì„ ì¸ì‹í•˜ì§€ ëª»í•´ ìƒê¸´ ë¬¸ì œë¡œ, queryClient ì¸ìŠ¤í„´ìŠ¤ë¥¼ \_app.tsxì—ì„œ ì»´í¬ë„ŒíŠ¸ ë°–ì— ì„ ì–¸í•´ í•´ê²°í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
<br><br>[ê¹ƒí—ˆë¸Œ ì°¸ì¡° ì´ìŠˆ](https://github.com/TanStack/query/issues/2072)

## ğŸ‘ Best Practice ì„ ì • ì´ìœ 

- SEO ì¸¡ë©´ì„ ìƒê°í•˜ì—¬ Next.jsë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
import Head from 'next/head';
import React from 'react';

export default function SEO({ text }: { text: string }) {
  return (
    <Head>
      <title>{text}</title>
      <meta name="description" content="ë§ˆì§€ë§‰ ê³¼ì œì…ë‹ˆë‹¤." />
      <link rel="icon" href="/favicon.ico" />
    </Head>
  );
}
```

- react-queryì˜ useMutationì„ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ëª©ë¡ê¹Œì§€ CRUD ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
const userDeleteMutation = useMutation(
  async (userId: string) => {
    return infoService?.deleteUser(userId);
  },
  {
    onSuccess: () => {
      queryClient.invalidateQueries(['users', page]);
    },
  }
);
const settingDeleteMutation = useMutation(
  async (userId: string) => {
    return infoService?.deleteUserSetting(userId);
  },
  {
    onSuccess: () => {
      queryClient.invalidateQueries(['userSetting', 'all']);
    },
  }
);
const nameMutation = useMutation(
  async (info: { name: string; id: string }) => {
    return infoService?.patchUserName(info);
  },
  {
    onSuccess: () => {
      queryClient.invalidateQueries(['users', page]);
    },
  }
);
```

- axios-intercepterì„ í™œìš©í•˜ì—¬ í† í°ì´ ë§Œë£Œëì„ ì‹œ, ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ë„ë¡ êµ¬í˜„í•˜ì˜€ê³  ìš”ì²­ì‹œì—” í—¤ë”ì— ë„£ì–´ì¤Œìœ¼ë¡œì¨ ì½”ë“œë¥¼ ë”ìš± ê°„ê²°í•˜ê²Œ êµ¬ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
export default class HttpClient {
  httpClient: AxiosInstance;
  constructor(private baseUrl: string) {
    this.httpClient = axios.create({
      baseURL: this.baseUrl,
    });
    this.httpClient.interceptors.response.use(
      (response) => response,
      (error) => {
        if (error instanceof AxiosError) {
          const { response } = error;
          if (response) {
            const { status } = response;
            if (status === 401) {
              localStorage.removeItem(ACCESS_TOKEN);
              localStorage.removeItem(USER_ID);
              window.location.replace('/login');
            } else {
              throw new HTTPError(
                response?.status,
                response?.statusText,
                response.data
              );
            }
          }
        }
        throw new Error('Server Error');
      }
    );
  }
```

- íšŒì›ê°€ì…, ë¡œê·¸ì¸ ì˜ˆì™¸ ì²˜ë¦¬ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
export default class HTTPError extends Error {
  constructor(
    private statusCode: number,
    public message: string,
    private data?: string
  ) {
    super(message);
  }
  get signUpMessage() {
    if (this.statusCode === 400) {
      switch (this.data) {
        case SIGN_UP_MESSAGE.email:
          this.message = 'ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤';
          break;
        case SIGN_UP_MESSAGE.password:
          this.message = '4ìì´ìƒì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”';
          break;
        case SIGN_UP_MESSAGE.duplicate:
          this.message = 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê³„ì •ì…ë‹ˆë‹¤';
          break;
        default:
          throw new Error('Unknown Error');
      }
      return this.message;
    }
    throw new Error('unknown Error');
  }
  get signInMessage() {
    switch (this.statusCode) {
      case 400:
        if (this.data === SIGN_IN_MESSAGE.password) {
          this.message = 'ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”';
        } else if (this.data === SIGN_IN_MESSAGE.email) {
          this.message = 'ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê³„ì •ì…ë‹ˆë‹¤';
        }
        break;
      case 404:
        this.message = 'ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤. urlì„ í™•ì¸í•´ì£¼ì„¸ìš”';
        break;
      default:
        throw new Error('Unknown Error');
    }
    return this.message;
  }
  get APIMessage() {
    switch (this.statusCode) {
      case 401:
        this.message = 'Access Tokenì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
        break;
      default:
        throw new Error('Unknown Error');
    }
    return this.message;
  }
}
```
